---
title: "CoderGirl Summer 2019 Cohort: Intro to R"
author: "Author: Crystal Lewis"
date: "Date: 8/14/19"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Practice basics

Basic math
```{r, warning=FALSE, message=FALSE}
2+2
```
You can see we get an answer in our console.

Now let's save that information into a variable.
```{r, warning=FALSE, message=FALSE}
x<-2+2
```
We can use this variable any time now.
```{r, warning=FALSE, message=FALSE}
x+5
```
We can also do Boolean Logic
```{r, warning=FALSE, message=FALSE}
x<2

x==2
```

Comments are made using #

```{r, warning=FALSE, message=FALSE}
#First comment, we must use == rather than = for Boolean Logic. The = sign means the same as <- and will assign to a variable
#Ex: x=2 is the same as x<-2
```


## Make a small data frame

A data frame is like a dataset, 2 dimensional data structure, rows and columns.
First let's make 3 variables
The : provides a sequence of values
The c() means to combine values into a vector or list

```{r, warning=FALSE, message=FALSE}
#Create 3 variables I want in my data frame
Name<- c("Crystal","Fox", "Oscar")
Age<- c(37,1,15)
Assigned.ID<-(1:3)

#I want to know what type of variable "Name" is
class(Name)

#Now combine to make the data frame
df<-data.frame(Name, Age, Assigned.ID)

#Let's look at the data frame
df

#What are the variable names in my data frame?
names(df)

#What is the structure of my data frame?
str(df)

#What are the summary stats of my data frame?
summary(df)
```

You can also make your data frame in one step

```{r, warning=FALSE, message=FALSE}
#Create 3 variables I want in my data frame
df2 <- data.frame("Name" = c("Crystal","Fox", "Oscar"), "Age" = c(37,1,15), "Assigned ID" = 1:3)
df2

#Notice the "." between Assigned and ID, R doesn't like spaces between variable names so it adds a .
#Best practice is to create names with no spaces (can use _ or .)
```

## Load in data

We don't usually create our dataframes from scratch. We usually collect the data from somewhere else and read it in.

First we need to change our directory to where we saved our IMDB file.

What directory are we in right now?
```{r, results='hide', warning=FALSE, message=FALSE, eval=FALSE}
getwd()
```

We need to change our working directory. Session->Set Working Directory->Choose Directory

We want to load in an excel file but loading in excel files aren't actually native to R (only txt, csv and other basic table files with no formatting). So we need a package to be able to load in an excel file.

Before calling a package, we need to install it. We are going to use the package `readxl`.
```{r, results='hide', warning=FALSE, message=FALSE, eval=FALSE}
install.packages("readxl")
```
```{r, results='hide', warning=FALSE, message=FALSE}
library(readxl)
```
Now we can read in our IMDB dataset into a data frame called "IMDB".

```{r, results='hide', warning=FALSE, message=FALSE}
IMDB <- read_excel("IMDBMovieMetadata.xlsx")

#We can view the dataset
View(IMDB)

#Note that if I wrote the word view with a lowercase v, the command would not work
#Or if I wrote "imdb" rather than "IMDB" the command would not run
#R is case sensitive
```
```{r, warning=FALSE, message=FALSE}
#Get the dimensions of the dataset
dim(IMDB)
#The structure of the dataset
str(IMDB)

#Look at the first few rows of the dataset
head(IMDB) #First 6 by default
#Can set to our own number of rows, can also do tail
head(IMDB, n=3)
```

## Finally let's answer a few questions using our IMDB data

### (1) What is the highest gross revenue for a movie in our dataset?
```{r, warning=FALSE, message=FALSE}
#What is the variable name for gross revenue?
names(IMDB)
#What type of variable is gross revenue
#To access variables in a dataframe you can use the $ notation or [column,row] bracket notation
class(IMDB$gross)
#Get summary statistics
summary(IMDB$gross)
```

###(2)What movie had the highest gross?
```{r, warning=FALSE, message=FALSE}
#I order my data frame by gross descending and then save back over the original IMDB data frame
IMDB<-IMDB[order(-IMDB$gross),]
head(IMDB$movie_title)
```

###Duplicates
I notice after answering question 2 that I have duplicates in my dataset. Avengers appears in the dataset twice. So I want to remove duplicates now.
I first need to install and load the package `dplyr`.

```{r, results='hide', warning=FALSE, message=FALSE, eval=FALSE}
install.packages("dplyr")
```
```{r, results='hide', warning=FALSE, message=FALSE}
library(dplyr)
```
```{r, warning=FALSE, message=FALSE}
#Let's check again how many cases we have currently
dim(IMDB)

#Get unique/distinct cases only and save into new data frame
IMDB2<-distinct(IMDB)

#Now how many unique cases?
dim(IMDB2)
```

###(3)Is there a relationship between movie budget and IMDB score?
```{r, warning=FALSE, message=FALSE}
#Let's create a scatterplot to see
plot(IMDB2$budget, IMDB2$imdb_score)

#There is a crazy outlier here that is skewing our chart, some movie had a budget over 12billion dollars. Could be an error in the data. So let's narrow our data to one year of data (I know that 2016 doesn't have this outlier)

IMDB2016<-subset(IMDB2, title_year==2016)


plot(IMDB2016$budget, IMDB2016$imdb_score)
```

###(4)Which country had the highest average gross revenue for movies in 2016?
We can see this easily through a bar chart. We will need to install the `ggplot2` package to create this.
```{r, results='hide', warning=FALSE, message=FALSE, eval=FALSE}
install.packages("ggplot2")
```
```{r, results='hide', warning=FALSE, message=FALSE}
library(ggplot2)
```
```{r, warning=FALSE, message=FALSE}
#We could save this into an item if we wanted to. Something like graph<-ggplot....
ggplot(data=IMDB2016, aes(x=country,y=gross))+stat_summary(fun.y="mean", geom="bar")
```
Lesson in deceiving statistics. Japan only had 2 movies in 2016 while the USA had 75 films.
```{r, warning=FALSE, message=FALSE}
table(IMDB2016$country)
IMDBJapan2016<-subset(IMDB2016, country=="Japan")
#Japan had one film that grossed around 300million and the other has no gross info. So the mean is based off of only one film.
table(IMDBJapan2016$gross)

IMDBUSA2016<-subset(IMDB2, country=="USA")
#USA had 75 films ranging from $560k to $400m
ggplot(data=IMDBUSA2016, aes(x=gross))+geom_histogram()

```
